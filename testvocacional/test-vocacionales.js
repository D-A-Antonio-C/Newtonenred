
const jsonData = {//PREGUNTAS
  "questions": [
    {
      "question": "¿Cómo prefieres resolver problemas complejos?",
      "options": [
        {"label": "A", "text": "Analizo los detalles y busco soluciones técnicas"},
        {"label": "B", "text": "Realizo experimentos y recopilo datos"},
        {"label": "C", "text": "Pienso en soluciones creativas y fuera de lo común"},
        {"label": "D", "text": "Me enfoco en entender el comportamiento humano"},
        {"label": "E", "text": "Utilizo conceptos matemáticos y lógicos para resolverlos"}
      ]
    },
    {
      "question": "¿Qué actividad disfrutas más en tu tiempo libre?",
      "options": [
        {"label": "A", "text": "Construir o reparar cosas"},
        {"label": "B", "text": "Investigar sobre fenómenos naturales"},
        {"label": "C", "text": "Pintar o diseñar"},
        {"label": "D", "text": "Ayudar a otras personas o interactuar con grupos"},
        {"label": "E", "text": "Resolver acertijos matemáticos"}
      ]
    },
    {
      "question": "¿Cuál de estas opciones te parece más interesante?",
      "options": [
        {"label": "A", "text": "Desarrollar software o sistemas"},
        {"label": "B", "text": "Estudiar las leyes de la física"},
        {"label": "C", "text": "Crear arte visual o digital"},
        {"label": "D", "text": "Organizar eventos o gestionar personas"},
        {"label": "E", "text": "Aplicar teorías matemáticas a problemas reales"}
      ]
    },
    {
      "question": "Cuando enfrentas un reto, ¿cómo te comportas?",
      "options": [
        {"label": "A", "text": "Busco soluciones prácticas y tecnológicas"},
        {"label": "B", "text": "Investigo diferentes enfoques científicos"},
        {"label": "C", "text": "Exploro soluciones innovadoras y creativas"},
        {"label": "D", "text": "Me enfoco en entender la perspectiva de los demás"},
        {"label": "E", "text": "Utilizo lógica y razonamiento matemático para abordar el problema"}
      ]
    },
    {
      "question": "¿Cómo te gustaría contribuir al mundo?",
      "options": [
        {"label": "A", "text": "Creando nuevas tecnologías o infraestructura"},
        {"label": "B", "text": "Descubriendo nuevas leyes de la naturaleza"},
        {"label": "C", "text": "Inspirando a otros a través de mis obras artísticas"},
        {"label": "D", "text": "Mejorando la calidad de vida de las personas a través del trabajo social"},
        {"label": "E", "text": "Desarrollando soluciones matemáticas a problemas complejos"}
      ]
    },
    {
      "question": "Si pudieras estudiar un tema en profundidad, ¿cuál elegirías?",
      "options": [
        {"label": "A", "text": "Ingeniería de sistemas o software"},
        {"label": "B", "text": "Biología o ciencias naturales"},
        {"label": "C", "text": "Diseño gráfico o artes visuales"},
        {"label": "D", "text": "Psicología o sociología"},
        {"label": "E", "text": "Estadística o matemáticas aplicadas"}
      ]
    },
    {
      "question": "¿Qué tipo de actividades prefieres en un trabajo?",
      "options": [
        {"label": "A", "text": "Diseñar o construir productos tecnológicos"},
        {"label": "B", "text": "Experimentar y analizar fenómenos naturales"},
        {"label": "C", "text": "Crear y presentar contenido artístico"},
        {"label": "D", "text": "Trabajar en equipo para ayudar a los demás"},
        {"label": "E", "text": "Resolver problemas usando matemáticas o tecnología"}
      ]
    },
    {
      "question": "¿Qué habilidad crees que tienes más desarrollada?",
      "options": [
        {"label": "A", "text": "Resolver problemas técnicos y prácticos"},
        {"label": "B", "text": "Analizar datos y teorías científicas"},
        {"label": "C", "text": "Crear ideas o conceptos visuales"},
        {"label": "D", "text": "Comprender y ayudar a los demás"},
        {"label": "E", "text": "Aplicar teoría matemática a situaciones reales"}
      ]
    },
    {
      "question": "¿Qué actividad te resulta más estimulante?",
      "options": [
        {"label": "A", "text": "Resolver problemas de ingeniería y diseño"},
        {"label": "B", "text": "Investigar sobre el comportamiento de los seres vivos"},
        {"label": "C", "text": "Elaborar piezas de arte o diseño"},
        {"label": "D", "text": "Liderar proyectos o iniciativas sociales"},
        {"label": "E", "text": "Aplicar fórmulas matemáticas a situaciones concretas"}
      ]
    },
    {
      "question": "¿Qué herramienta prefieres usar?",
      "options": [
        {"label": "A", "text": "Herramientas tecnológicas y software especializado"},
        {"label": "B", "text": "Instrumentos de laboratorio y equipos científicos"},
        {"label": "C", "text": "Materiales artísticos como pinceles, cámaras o software de diseño"},
        {"label": "D", "text": "Herramientas para la organización y gestión de personas o proyectos"},
        {"label": "E", "text": "Cálculos matemáticos y algoritmos"}
      ]
    },
    {
      "question": "¿Qué tipo de ambiente de trabajo prefieres?",
      "options": [
        {"label": "A", "text": "En un laboratorio o taller tecnológico"},
        {"label": "B", "text": "En un campo de investigación científica"},
        {"label": "C", "text": "En un estudio de arte o diseño"},
        {"label": "D", "text": "En un entorno colaborativo o de servicio social"},
        {"label": "E", "text": "En un espacio que fomente el análisis matemático o financiero"}
      ]
    },
    {
      "question": "¿Qué te resulta más satisfactorio?",
      "options": [
        {"label": "A", "text": "Crear soluciones técnicas que funcionen de manera eficiente"},
        {"label": "B", "text": "Descubrir nuevas teorías científicas o avances"},
        {"label": "C", "text": "Transmitir emociones o ideas a través del arte"},
        {"label": "D", "text": "Ayudar a las personas a resolver sus problemas"},
        {"label": "E", "text": "Aplicar soluciones matemáticas a desafíos complejos"}
      ]
    },
    {
      "question": "¿En qué tipo de proyectos te gustaría participar?",
      "options": [
        {"label": "A", "text": "Desarrollar nuevos productos tecnológicos o de ingeniería"},
        {"label": "B", "text": "Realizar investigaciones científicas de impacto global"},
        {"label": "C", "text": "Participar en proyectos artísticos o culturales"},
        {"label": "D", "text": "Liderar proyectos de bienestar social o comunitario"},
        {"label": "E", "text": "Colaborar en proyectos financieros o tecnológicos utilizando matemáticas"}
      ]
    },
    {
      "question": "¿Qué área te resulta más desafiante?",
      "options": [
        {"label": "A", "text": "Construir infraestructuras o diseñar sistemas tecnológicos"},
        {"label": "B", "text": "Comprender procesos biológicos o químicos complejos"},
        {"label": "C", "text": "Innovar en el campo del arte o diseño"},
        {"label": "D", "text": "Organizar recursos y gestionar personas en un contexto social"},
        {"label": "E", "text": "Resolver problemas complejos usando matemáticas"}
      ]
    },
    {
      "question": "¿Qué te atrae más de las ciencias o tecnología?",
      "options": [
        {"label": "A", "text": "Desarrollar soluciones técnicas a problemas reales"},
        {"label": "B", "text": "Estudiar el funcionamiento del mundo natural"},
        {"label": "C", "text": "Explorar la relación entre la estética y la tecnología"},
        {"label": "D", "text": "Trabajar en la mejora de la vida humana mediante la ciencia social"},
        {"label": "E", "text": "Aplicar el análisis matemático para resolver grandes problemas"}
      ]
    }
  ]
}

const resultData={//RESULTADOS
  "opciones":{
    "A":{
      "title":"Mayoria A",
      "subtitle": "Estas en el grupo de los Matematicos e informaticos.",
      "text":"Según tus elecciones en tus respuestas eres una persona que le gustaria o le gusta pasar tiempo frente a su computador, programando o aprendiendo autodidacticamente sobre sus intereses y ademas que se te facilita todo aquello con lo que es calculos numéricos, y actividades que pongan a prueba tu capacidad mental.",
      "profesiones":[
        "Ingeniería de Sistemas",
        "Ingeniería Industrial",
        "Ingenieria Informática",
        "Ingeniería Civil",
        "Matemática Aplicada",
        "ingeneria electronica - mecatronica"
      ],
      "bloque":"A"
    },
    "B":{
      "title": "Mayoría B",
      "subtitle": "LO TUYO, LO TUYO, ¡SON LAS CIENCIAS Y LA VIDA!",
      "text": "El lado humano es algo muy importante para personas como tú, es por eso que tienes un sentido de siempre ayudar a los demás, pero también de hacerlo rápido y bien. Te gusta el análisis de las situaciones antes de emitir cualquier tipo de juicio, por eso, sueles ser tan acertado en todos tus comentarios.",
      "profesiones": [
        "Medicina Humana",
        "Enfermería",
        "Educación Física y deportes",
        "Bromatología y Nutrición",
        "Veterinaria",
        "Biologia"
      ],
      "bloque": "B"
    },
    "C":{
      "title": "Mayoría C",
      "subtitle": "LAS CIENCIAS SOCIALES, LA EDUCACION Y LAS LEYES TE ESTÁN LLAMANDO",
      "text": "Pensar, entender las razones de las cosas así como una correcta expresión son para ti aspectos súper importantes para lograr cualquier tipo de objetivo, también, eres aficionado de escuchar los puntos de vista de los demás para así sacar tus propias conclusiones. Estas presto para escuchar y servir, tu labor puede enfocarse por ayudar y hacer respetar a las personas.",
      "profesiones": [
        "Educacion",
        "Trabajo social",
        "Sociologia",
        "Derecho y ciencias politicas",
        "Ciencias de la comunicacion",
        "Psicologia"
      ],
      "bloque": "C"
    },
    "D":{
      "title": "Mayoría D",
      "subtitle": "TIENES QUE ESTUDIAR ALGO DEL ÁREA DE ADMINISTRATIVAS",
      "text": "Tienes un alto sentido de la palabra \"eficiencia\" y te gusta que las cosas se hagan bien hechas o que mejor ¡no se hagan! Es por eso que prefieres tener el control de las actividades que realizas tú y lo demás para que puedan salir como deben de ser.",
      "profesiones": [
        "Economía y Finanzas",
        "Hotelería y Turismo",
        "Administración",
        "Negocios Internacionales",
        "Contabilidad",
        "Marketing"
      ],
      "bloque": "D"
    },
    "E":{
      "title": "Mayoría E",
      "subtitle": "¿QUÉ ESTÁS ESPERANDO? ¡LO TUYO SON LAS ARTES Y/O EL DISEÑO!",
      "text": "Tus respuestas delatan a una persona creativa y expresiva, tienes una visión diferente de las cosas y es por eso que una carrera artística te ayudará a desarrollar tu potencial.",
      "profesiones": [
        "Bellas Artes",
        "Arquitectura",
        "Diseño Gráfico",
        "Fotografía",
        "Diseño Industrial",
        "Diseño de Interiores"
      ],
      "bloque": "E"
    }
  }
}
  
  // Función para inyectar las preguntas en el HTML
  function injectQuestions(jsonData) {
    const container = document.querySelector(".shadow.w-100.SlideBox"); // Selecciona el contenedor donde se inyectará el contenido
    /*container.innerHTML = '';*/ // Limpia el contenedor antes de inyectar nuevo contenido
  
    // Itera sobre las preguntas
    jsonData.questions.forEach((questionData, index) => {
      // Crear el HTML de la pregunta y las opciones
      const questionHTML = `
        <div class="lc_tab" id="tab_${index + 1}">
          <div class="px-3 py-4 tvRadioB">
            <p class="tvTit teal color01">
              <span class="fs22">${index + 1}. ${questionData.question}</span>
            </p>
            ${questionData.options.map(option => `
              <p><button type="button" class="btn-testV"><b class="${option.label}">${option.label}.</b> ${option.text}</button></p>
            `).join('')}
            <div class="mini">
              <small>${index + 1}/${jsonData.questions.length}</small>
            </div>
          </div>
        </div>
      `;
      // Inyectar el HTML generado dentro del contenedor
      container.innerHTML += questionHTML;
    });


  }
  
  // Llamamos a la función para cargar las preguntas cuando el documento esté listo
  injectQuestions(jsonData)

  // injectamos la clase show para el primer slider
  document.getElementById("tab_1").className = " lc_tab_show";
  

//funcionamiento del cuestionario

var current_step = 1;

var total_tabs = document.getElementsByClassName("lc_tab").length + 1;  // +1 porque siempre hay un tab que no tiene clase (el current tab)

var opcion_A = 0;
var opcion_B = 0;
var opcion_C = 0;
var opcion_D = 0;
var opcion_E = 0;

var answers_array = [];

function hide_tabs() {
    for (var i = 1; i <= total_tabs; i++) {
        document.getElementById("tab_" + i).className = "lc_tab"; //con clase tab se oculta
    }
}

function show_current_tab() {
    document.getElementById("tab_" + current_step).className = "lc_tab_show";

}

function next() {

    current_step += 1;

    hide_tabs();
    show_current_tab();
}

function reset() {
    current_step = 1;
    opcion_A = 0;
    opcion_B = 0;
    opcion_C = 0;
    opcion_D = 0;
    opcion_E = 0;

    answers_array = null;
    answers_array = [];

    // todos los elementos cuyo id empiece con "opcion" (seccion de resultados)
    var opciones = document.querySelectorAll("[id^='opcion']");
    opciones.forEach(element => {
        element.classList.remove('mayoria');
        element.classList.add('minoria');
    });

    hide_tabs();
    show_current_tab();
}

// Cada vez que seleccionen una opcion guardamos la seleccion y avanzamos el step
var buttons = document.querySelectorAll('button.btn-testV');
buttons.forEach(element => {
    element.addEventListener('click', function(elm){
        var child = elm.target.children;
        var child_class = child[0].attributes.class.nodeValue;

        if (child_class == "A") { opcion_A += 1; }
        else if (child_class == "B") { opcion_B += 1; }
        else if (child_class == "C") { opcion_C += 1; }
        else if (child_class == "D") { opcion_D += 1; }
        else if (child_class == "E") { opcion_E += 1; }

        /* 
        
        PRUEBA PARA EL FUNCIONAMIENTO DEL TEST
        console.log(opcion_A);
        console.log(opcion_B);
        console.log(opcion_C);
        console.log(opcion_D);
        console.log(opcion_E);
        
        */

        next(); // avanzamos al siguiente step (siguiente pregunta)

    });
});

function get_result() {
    answers_array.push(
        { "opcion": "A", "total": opcion_A },
        { "opcion": "B", "total": opcion_B },
        { "opcion": "C", "total": opcion_C },
        { "opcion": "D", "total": opcion_D },
        { "opcion": "E", "total": opcion_E }
    );

    var total_mayor = Math.max.apply(Math, answers_array.map(function (o) { return o.total; }));
    var obj_opcion_mayor = null;

    answers_array.forEach(function (obj, index) {

        if (obj.total == total_mayor) {
            obj_opcion_mayor = obj.opcion;
        }

    });

    return obj_opcion_mayor;
}

// boton Ver resultados

function veresultado(){
  
  var opcion_mayor = get_result();
  rslt = resultData.opciones[opcion_mayor];

  const rsltcontainer = document.getElementById("tab_17");//cambie el contenedor manualmente

  const resultprint=
  `
<div class="mayoria" id="opcion_${opcion_mayor}">
  <div class="px-3 py-4">
    <p><b>${rslt.title}:</b></p>
    <p class="tvTit">
      <span class="fs22 amarillo">${rslt.subtitle}</span>
    </p>
    <p>${rslt.text}</p>
    <p class=""><b class="gris-o">Carreras que puedes estudiar:</b></p>
    <p>•${rslt.profesiones[0]}</p>
    <p>•${rslt.profesiones[1]}</p>
    <p>•${rslt.profesiones[2]}</p>
    <p>•${rslt.profesiones[3]}</p>
    <p>•${rslt.profesiones[4]}</p>
    <p>•${rslt.profesiones[5]}</p>
    <div class="clearfix"></div>
    <button class="testbutton1" onclick="javascript:void(window.open('vocacionalresults.html'));">CARRERAS DEL BLOQUE ${opcion_mayor}</button>
    <p class="text-center mt-4"><a onclick="reset()" class="" href="#">Volver a empezar</a></p>
    <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSfovX6MafE7m5RqmLiHAicjy7vaYsQrZlxiq-hy6GEFe247gw/viewform?embedded=true" width="100%" height="2071" frameborder="0" marginheight="0" marginwidth="0">Cargando…</iframe>
  </div>
</div>
`;
  rsltcontainer.innerHTML += resultprint;
  next(); 
};



